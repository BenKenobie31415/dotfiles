#################################
#       General Settings        #
#################################

backend = "glx";
vsync = true;

# Use X Sync fence to sync clients' draw calls, to make sure all draw
# calls are finished before picom starts drawing. Needed on nvidia-drivers
# with GLX backend for some users.
#
xrender-sync-fence = true


#################################
#            Fading             #
#################################

fading = true;
fade-delta = 20;
fade-in-step = 0.25;
fade-out-step = 0.25;

# Prevents fading for any window other than the specified
#fade-exclude = "(!class_i = 'presel_feedback')";


#################################
#             Blur              #
#################################

blur: {
  method = "dual_kawase";
  strength = 8;
}

# Honestly don't know why but removing this does not remove the blur
blur-background = true

# Prevents blur for any window other than the specified
blur-background-exclude = "(!class_g = 'st-256color' && !class_i = 'presel_feedback')";

crop_shadow-to-monitor = true;


#################################
#         Transparency          #
#################################

# Forces specified windows to be transparent
opacity-rule = [ "50:class_g = 'Bspwm' && class_i = 'presel_feedback'" ];

# Make transparent windows clip other windows like non-transparent windows do,
# instead of blending on top of them.
#
transparent-clipping = true

# Specify a list of conditions of windows that should never have transparent
# clipping applied. Useful for screenshot tools, where you need to be able to
# see through transparent parts of the window.
#
transparent-clipping-exclude = ["(!class_g = 'st-256color')"]


#################################
#          Performance          #
#################################

# GLX backend: Avoid using stencil buffer, useful if you don't have a stencil buffer.
# Might cause incorrect opacity when rendering transparent content (but never
# practically happened) and may not work with blur-background.
# My tests show a 15% performance boost. Recommended.
#
glx-no-stencil = true;

# GLX backend: Avoid rebinding pixmap on window damage.
# Probably could improve performance on rapid window content changes,
# but is known to break things on some drivers (LLVMpipe, xf86-video-intel, etc.).
# Recommended if it works.
#
glx-no-rebind-pixmap = true


#################################
#        Window Type Rules      #
#################################

# WINDOW_TYPE is one of the 15 window types defined in EWMH standard: "unknown", "desktop", "dock", "toolbar", "menu", "utility", "splash", "dialog", "normal", "dropdown_menu", "popup_menu", "tooltip", "notification", "combo", and "dnd".
#
# The WINDOW_TYPE can be obtained via xprop -notype _NET_WM_WINDOW_TYPE
# I assume that normal is the fallback, if no type is given by the command
#
# Following per window-type options are available:
#
# fade, shadow
# Controls window-type-specific shadow and fade settings.
#
# opacity
# Controls default opacity of the window type.
#
# focus
# Controls whether the window of this type is to be always considered focused. (By default, all window types except "normal" and "dialog" has this on.)
#
# blur-background
# Controls whether the window of this type will have its transparent background blurred.
#
# full-shadow
# Controls whether shadow is drawn under the parts of the window that you normally won’t be able to see. Useful when the window has parts of it transparent, and you want shadows in those areas.
#
# clip-shadow-above
# Controls whether shadows that would have been drawn above the window should be clipped. Useful for dock windows that should have no shadow painted on top.
#
# redir-ignore
# Controls whether this type of windows should cause screen to become redirected again after been unredirected. If you have --unredir-if-possible set, and doesn’t want certain window to cause unnecessary screen redirection, you can set this to true.
#
# Should follow format: type = { option=(true|false); }

wintypes:
{
  utility       = { fade=false; }
  unknown       = { fade=false; }
  desktop       = { fade=false; }
  dock          = { fade=false; }
  toolbar       = { fade=false; }
  menu          = { fade=false; }
  utility       = { fade=false; }
  splash        = { fade=false; }
  dialog        = { fade=false; }
  normal        = { fade=false; }
  dropdown_menu = { fade=false; }
  popup_menu    = { fade=false; }
  tooltip       = { fade=false; }
  notification  = { fade=false; }
  combo         = { fade=false; }
  dnd           = { fade=false; }
};

